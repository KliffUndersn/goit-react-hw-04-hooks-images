(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{69:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(21),o=a.n(c),s=a(11),i=a.n(s),u=a(12),l=a(22),d=a(4),j=a(9),b={query:{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"}},h=a(0);function m(e){var t=e.submit,a=Object(r.useState)(""),n=Object(j.a)(a,2),c=n[0],o=n[1];return Object(h.jsx)("header",{className:"Searchbar",children:Object(h.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),t(c),o("")},children:[Object(h.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(h.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(h.jsx)("input",Object(d.a)(Object(d.a)({},b.query),{},{onChange:function(e){return o(e.target.value)},value:c}))]})})}var g=function(e){var t=e.data,a=e.modalOpen;return Object(h.jsx)("div",{children:Object(h.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){return Object(h.jsx)("li",{className:"ImageGalleryItem",children:Object(h.jsx)("img",{src:e.webformatURL,alt:e.tags,className:"ImageGalleryItem-image",onClick:function(){return a(e.largeImageURL,e.tags)}})},e.id)}))})})},f=function(e){var t=e.clicker;return Object(h.jsx)("button",{onClick:t,className:"Button",children:"load more"})};function O(e){var t=e.children,a=e.modalClose;Object(r.useEffect)((function(){return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}}));var n=function(e){"Escape"===e.code&&a()};return Object(h.jsx)("div",{className:"Overlay",onClick:a,children:Object(h.jsx)("div",{className:"Modal",children:t})})}var p=a(23),v=a.n(p),x=function(){return Object(h.jsx)(v.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3})},y={searchQuery:"",searchResult:[],page:1,loading:!1,modal:!1,largeImage:"",error:null,tags:""},w=a(24),k=a.n(w).a.create({baseURL:"https://pixabay.com/api/",params:{key:"23372923-aa63da10459dab2a89fc14fe7"}}),N=function(e){return{params:e}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"cat";return k.get("/",N({q:a,per_page:t,page:e}))};function I(){var e=Object(r.useState)(Object(d.a)({},y)),t=Object(j.a)(e,2),a=t[0],n=t[1],c=function(){var e=Object(l.a)(i.a.mark((function e(){var t,r,c,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.page,r=a.searchQuery,e.prev=1,e.next=4,S(t,12,r);case 4:if(c=e.sent,o=c.data,(s=o.hits).length){e.next=9;break}throw new Error("Nothing found, try something else.");case 9:return e.abrupt("return",n((function(e){var t=e.searchResult,r=e.page;return Object(d.a)(Object(d.a)({},a),{},{searchResult:[].concat(Object(u.a)(t),Object(u.a)(s)),loading:!1,page:r+1})})));case 12:e.prev=12,e.t0=e.catch(1),n({error:e.t0.message,loading:!1});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),o=function(e){n(Object(d.a)(Object(d.a)({},y),{},{searchQuery:e,loading:!0}))},s=function(){return n({modal:!1})};Object(r.useEffect)((function(){var e=a.searchQuery,t=a.page;a.loading&&(e||t>1)&&c()}),[o,a.page]);var b=a.largeImage,p=a.searchResult,v=a.loading,w=a.modal,k=a.error,N=a.tags;return Object(h.jsxs)("div",{children:[Object(h.jsx)(m,{submit:o}),p&&Object(h.jsx)(g,{data:p,modalOpen:function(e,t){return n({tags:t,largeImage:e,modal:!0})}}),k&&Object(h.jsx)("p",{className:"Error",children:k}),(null===p||void 0===p?void 0:p.length)>=1&&Object(h.jsx)(f,{clicker:function(){return n((function(){return console.log(a.searchQuery),Object(d.a)(Object(d.a)({},a),{},{loading:!0})}))}}),v&&Object(h.jsx)(x,{}),w&&Object(h.jsx)(O,{modalClose:s,children:Object(h.jsx)("img",{src:b,alt:N,onClick:function(){return s()}})})]})}a(69);o.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(I,{})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.cb10aab8.chunk.js.map