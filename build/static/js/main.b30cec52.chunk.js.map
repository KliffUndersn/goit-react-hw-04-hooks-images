{"version":3,"sources":["components/SearchBar/fields.js","components/SearchBar/SearchBar.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","components/Modal/Modal.js","components/Loader/Loader.js","initialState.js","fetch/fetch.js","App.js","index.js"],"names":["fields","query","className","type","autoComplete","autoFocus","placeholder","SearchBar","state","searchValue","handleSubmit","e","preventDefault","props","submit","setState","handleChange","target","value","onSubmit","this","onChange","Component","ImageGallery","data","modalOpen","galleryList","ref","map","src","webformatURL","alt","tags","onClick","largeImageURL","id","Button","clicker","Modal","closeModals","code","modalClose","window","addEventListener","removeEventListener","children","Loader","color","height","width","timeout","initialState","searchQuery","searchResult","page","loading","modal","largeImage","error","instance","axios","create","baseURL","params","key","createParams","getPosts","per_page","q","get","App","createRef","fetchPosts","a","dataResult","hits","length","Error","message","loadMore","img","_","prevState","current","scrollHeight","snapshot","prevResult","prevPage","scrollTo","top","behavior","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b30cec52.chunk.js","sourcesContent":["\nconst fields = {\n    query: {\n        className: \"SearchForm-input\",\n        type: \"text\",\n        autoComplete: \"off\",\n        autoFocus: true,\n        placeholder: \"Search images and photos\"\n    }\n   } \n\nexport default fields","import { Component } from 'react'\nimport fields from \"./fields\"\n\nexport default class SearchBar extends Component {\n\n    state = {\n      searchValue: \"\"\n    }\n\n    handleSubmit = (e) => {\n      e.preventDefault();\n      this.props.submit(this.state.searchValue)\n      this.setState({searchValue:\"\"})\n    }\n    \n    handleChange = (e) => {\n      return this.setState({searchValue:e.target.value})\n    }\n\n      render () {\n        return(\n            <header className=\"Searchbar\">\n            <form className=\"SearchForm\"\n                onSubmit={this.handleSubmit}\n            >\n              <button type=\"submit\" className=\"SearchForm-button\">\n                <span className=\"SearchForm-button-label\">Search</span>\n              </button>\n                  <input\n                  {...fields.query}\n                  onChange={this.handleChange}\n                  value={this.state.searchValue}\n                  />\n              \n            </form>\n            </header>  \n        )}\n}\n\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nconst ImageGallery = ({data, modalOpen, galleryList}) => {   \n            return (\n                <div>\n                    <ul className=\"ImageGallery\" ref={galleryList}>\n                    {data.map(e=>{return <li className=\"ImageGalleryItem\" key={e.id} >\n                    <img src={e.webformatURL} alt={e.tags} className=\"ImageGalleryItem-image\" onClick={()=>modalOpen(e.largeImageURL,e.tags)}/>\n                     </li>})}\n                    </ul>\n                </div>\n            )\n            }  \n\n\nexport default ImageGallery\n\n\nImageGallery.propTypes={\n    data:PropTypes.arrayOf(PropTypes.shape(\n        {id:PropTypes.number,\n        webformatURL:PropTypes.string.isRequired,\n        tags:PropTypes.string.isRequired,\n        largeImageURL:PropTypes.string.isRequired,\n        })),\n    modalOpen:PropTypes.func.isRequired,\n    galleryList:PropTypes.shape({current:PropTypes.instanceOf(Element)})\n  }","import React from 'react'\nimport PropTypes from 'prop-types'\n\nconst Button = ({clicker}) => {\nreturn (\n    <button onClick={clicker} className=\"Button\">load more</button>\n)\n}\n\nexport default Button\n\nButton.propTypes = {\n    clicker:PropTypes.func.isRequired,\n}","import React, { Component } from 'react'\n\n\nexport default class Modal extends Component {\n\n    componentDidMount() {\n        window.addEventListener('keydown',this.closeModals)\n     }\n     componentWillUnmount() {\n        window.removeEventListener('keydown',this.closeModals)\n     }\n     \n    closeModals = (e) => {\n           if (e.code === \"Escape\") {\n              this.props.modalClose();\n            }\n        }\n     \n     render(){\n        const { children } = this.props;\n    return (\n        \n        <div className=\"Overlay\">\n        <div className=\"Modal\">\n            {children}\n        </div>\n        </div>\n    )}\n}","import React from 'react'\nimport Loaders from \"react-loader-spinner\";\n\nconst Loader = () => {\n    return    <Loaders type=\"Puff\"\n    color=\"#00BFFF\"\n    height={100}\n    width={100}\n    timeout={3000} //3 secs\n    />\n}\n\nexport default Loader","const initialState = {\n    searchQuery:\"\",\n    searchResult: [],\n    page:1,\n    loading:false,\n    modal:false,\n    largeImage:\"\",\n    error:null,\n    tags:\"\",\n  }\n\nexport default initialState","import axios from \"axios\";\n\n\nconst instance = axios.create({\n    baseURL: \"https://pixabay.com/api/\",\n    params: {\n        key: \"23372923-aa63da10459dab2a89fc14fe7\"\n    }\n    \n});\n\nconst createParams = (params) => {\n    return {\n        params\n    }\n};\n\nconst  getPosts = (page = 1, per_page = 3, q = \"cat\" )=> {\n    return instance.get(\"/\", createParams({q, per_page, page}));\n}\nexport default getPosts","import { Component , createRef} from 'react'\n\nimport SearchBar from \"./components/SearchBar\";\nimport ImageGallery from './components/ImageGallery/ImageGallery';\nimport Button from './components/Button/Button';\nimport Modal from './components/Modal/Modal';\nimport Loader from './components/Loader/Loader';\n\nimport initialState from './initialState';\nimport getPosts from './fetch/fetch';\n\n\nexport default class App extends Component {\n\n  state = {\n    ...initialState\n  }\n\n  galleryList = createRef()\n\n  getSnapshotBeforeUpdate(_, prevState){\n      if(prevState.searchResult.length < this.state.searchResult.length) {\n          const {current} = this.galleryList;\n          return current.scrollHeight;\n      }\n      return null;\n  }\n\n  componentDidUpdate(_, prevState, snapshot) {\n    \n    const {searchQuery, page, loading} = this.state\n    const {searchQuery: prevResult, page: prevPage} = prevState.searchQuery\n\n    if (loading && (searchQuery !== prevResult || page !== prevPage )){ \n      this.fetchPosts()\n    }\n\n     if(snapshot){\n         window.scrollTo({\n             top: snapshot,\n             behavior: \"smooth\"\n         });\n     }    \n    }\n\n    fetchPosts = async ()=> {\n      const {page, searchQuery} = this.state;\n      \n      try {\n        const {data} = await getPosts(page, 12, searchQuery)\n    const dataResult = data.hits;\n        if (!dataResult.length) {\n           throw new Error(\"Nothing found, try something else.\")\n        }\n        return this.setState(({searchResult, page})=> {\n          return {\n            searchResult:[...searchResult,...dataResult],\n            loading:false, \n            page: page +1}\n            }\n            )\n      }\n      catch (error) {\n         this.setState({error: error.message, loading:false})\n      }\n\n    }\n  searchQuery = (query) => {\n    this.setState({...initialState,searchQuery:query,loading:true})\n  }\n  loadMore = () => this.setState({loading: true})\n\n  modalOpen = (img,tags) => this.setState({tags:tags,largeImage:img,modal:true})\n\n  modalClose = () => this.setState({modal:false})\n\n\n\n  render() {\n    const {largeImage,searchResult,loading,modal,error,tags} = this.state\n    return (\n      <div>\n        <SearchBar submit={this.searchQuery}/>\n        <ImageGallery data={searchResult} modalOpen={this.modalOpen} galleryList={this.galleryList}/>\n        {error && <p className=\"Error\">{error}</p>}\n        {(searchResult.length >= 1)&& <Button clicker={this.loadMore}/>}\n        {loading && <Loader/>}\n        {modal && \n        <Modal modalClose={this.modalClose}>\n        <img \n        src={largeImage} \n        alt={tags} \n        onClick={()=>this.modalClose()}  />\n        </Modal>}\n      </div>\n    )\n  }\n}\n\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport \"./index.css\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}